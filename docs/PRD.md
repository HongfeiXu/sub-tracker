# SubTracker 产品需求文档

> 版本：v1.0 | 日期：2026-02-24 | 状态：需求评审

---

## 一、产品概述

### 1.1 产品定位

SubTracker 是一款**纯前端的个人订阅费用记录工具**，帮助用户集中管理所有订阅服务的费用和续费周期，清晰了解"每个月/每年在订阅上花了多少钱"。

### 1.2 目标用户

- 订阅了多个软件/会员服务的个人用户
- 希望快速了解自己订阅支出全貌，不需要复杂的记账功能
- 偏好轻量工具，不想注册账号或部署服务器

### 1.3 核心价值

- **一目了然**：打开即看到本月/本年的订阅总支出和即将扣款的项目
- **零门槛**：无需注册、无需后端，打开网页即用
- **数据自主**：数据存本地，支持 JSON 导入导出，用户完全掌控

### 1.4 产品形态

纯前端 Web App（SPA），移动端优先设计，兼容桌面浏览器。

---

## 二、功能范围

### 2.1 v1 包含

| 模块 | 功能 |
|------|------|
| 订阅管理 | 新增、编辑、删除订阅记录 |
| 状态管理 | 标记订阅为"已取消"（归档保留，不删除） |
| 总览仪表盘 | 月度/年度支出统计，分类占比图表，即将扣款列表 |
| 多币种 | 支持人民币（CNY）和美元（USD），分开显示 |
| 数据导入导出 | JSON 格式，支持导入和导出 |
| 主题切换 | 暗色/浅色/跟随系统，三档切换 |

### 2.2 v1 不包含

| 功能 | 原因 |
|------|------|
| 消息推送/到期提醒 | v1 暂不做，后续迭代 |
| 汇率换算合并显示 | v1 按币种分开显示，后续接汇率 API |
| 预设订阅模板 | v1 全手动填写，后续可加常用服务预设库 |
| 用户账号体系 | 纯前端，不做登录注册 |
| 后端服务/云同步 | 数据仅存 localStorage |
| 分类图标 | v1 仅用颜色区分，后续可加图标 |

### 2.3 后续迭代方向（备忘）

- 到期前浏览器通知 / PWA 推送
- 汇率 API 接入，支持合并为人民币显示
- 常用订阅服务预设模板（含品牌 logo）
- 分类图标支持
- PWA 安装支持（Add to Home Screen）
- 数据同步方案（iCloud / Google Drive / WebDAV）

---

## 三、信息架构

### 3.1 页面结构

```
┌─────────────────────────────────┐
│  顶部栏：应用名称 + 设置齿轮图标  │
├─────────────────────────────────┤
│  Tab 切换：总览 | 订阅列表       │
├─────────────────────────────────┤
│                                 │
│  [Tab 内容区]                    │
│                                 │
├─────────────────────────────────┤
│  FAB 按钮：+ 添加订阅（悬浮）    │
└─────────────────────────────────┘
```

共 2 个主视图 + 2 个弹层：

| 视图/弹层 | 说明 |
|----------|------|
| 总览（Dashboard） | 默认首页，展示统计数据和即将扣款 |
| 订阅列表（Subscriptions） | 所有订阅记录，支持切换"生效中/已取消" |
| 添加/编辑弹窗 | 底部抽屉式弹层，订阅信息表单 |
| 设置面板 | 顶部齿轮点开的小面板，含主题切换、导入、导出 |

### 3.2 订阅记录信息

每条订阅记录包含以下信息：

| 信息 | 必填 | 说明 |
|------|------|------|
| 名称 | 是 | 订阅服务名称 |
| 金额 | 是 | 费用金额 |
| 币种 | 是 | 人民币（CNY）或 美元（USD） |
| 计费周期 | 是 | 月付 / 季付 / 年付 / 自定义天数 |
| 起始日期 | 是 | 首次订阅日期 |
| 分类 | 是 | 所属分类 |
| 卡片颜色 | 自动 | 根据品牌自动匹配，用户可修改 |
| 状态 | 自动 | 生效中 / 已取消 |
| 备注 | 否 | 可选备注信息 |

### 3.3 预设分类

| 分类名称 | 默认颜色 |
|---------|---------|
| 影音娱乐 | #FF6B8A（粉红） |
| 工具软件 | #5B9EF4（蓝色） |
| 云存储 | #47D4A0（绿色） |
| 会员服务 | #FFB74D（橙色） |
| 其他 | #A78BFA（紫色） |

用户可在添加订阅时输入新分类名称，新分类自动从预设色板中分配下一个颜色。

### 3.4 业务规则

**品牌色自动匹配：**

- 用户输入订阅名称时，自动匹配内置品牌色（如输入"Netflix"自动显示红色卡片）
- 匹配成功时自动填充，用户可手动修改
- 未匹配时使用所选分类的默认颜色
- 具体品牌色映射表见 ARCHITECTURE.md

**分类颜色自动分配：**

- 预设分类使用上方表格中的默认颜色
- 用户新建分类时，自动从预设色板中分配下一个可用颜色

**下次扣款日自动计算：**

- 根据起始日期和计费周期向前推算最近一个未来日期
- 例：起始日期 2025-01-15，月付，当前日期 2026-02-24 → 下次扣款日 2026-03-15
- 已取消的订阅不显示下次扣款日

**月度支出计算：**

- 将所有生效中的订阅折算为月均金额
- 月付 → 原额；季付 → ÷3；年付 → ÷12；自定义 → ÷(天数/30)
- CNY 和 USD 分别求和，独立显示

**年度支出计算：**

- 月付 → ×12；季付 → ×4；年付 → 原额；自定义 → ×(365/天数)

**分类占比：**

- 基于月度支出金额，按分类汇总
- CNY 和 USD 分别计算占比（饼图按币种分开，如果某币种无数据则不显示）

**导入导出：**

- 导出为单个 JSON 文件
- 导入为**覆盖模式**：导入时提示用户"将替换当前所有数据，是否继续？"，确认后清空并写入新数据

### 3.5 核心用户流程

**首次使用：**

打开网页 → 看到空状态引导 → 点击"+"添加第一条订阅 → 填写表单并保存 → 回到总览页看到统计数据

**日常查看：**

打开网页 → 总览页查看月度/年度支出 → 查看即将扣款列表 → （可选）切换到订阅列表查看详情

**管理订阅：**

订阅列表 → 点击某条订阅 → 编辑信息 / 标记为已取消 / 删除 → 保存后回到列表

**数据迁移：**

设置面板 → 导出数据为 JSON → 在新设备上打开 → 设置面板 → 导入 JSON → 确认覆盖 → 数据恢复

---

## 四、交互设计

### 4.1 总览页（Dashboard）

**顶部统计卡片区域：**

```
┌──────────────────┐ ┌──────────────────┐
│  月度支出          │ │  年度支出          │
│  ¥ 128.00        │ │  ¥ 1,536.00      │
│  $ 45.97         │ │  $ 551.64        │
│                  │ │                  │
│  [环形图]         │ │  [环形图]          │
│  按分类占比        │ │  按分类占比        │
└──────────────────┘ └──────────────────┘
```

- 移动端：上下堆叠（月度在上，年度在下）
- 桌面端：左右并排
- 环形图中心显示总金额，环形按分类着色
- 如果只有一种币种有数据，只显示该币种
- 如果两种币种都有数据，卡片内分两行显示（¥ 在上，$ 在下）

**即将扣款列表：**

- 标题："即将扣款"
- 展示所有生效中订阅，按下次扣款日正序排列
- 每项显示：名称、金额、距下次扣款天数（如"3 天后"、"今天"、"已过期"）
- 显示逻辑：优先展示 30 天内到期的，超出 30 天的折叠（点击"查看全部"展开）
- 卡片左侧带品牌色色条

### 4.2 订阅列表页（Subscriptions）

**顶部筛选：**

- 两个 Tab / Segment：「生效中」|「已取消」
- 默认显示"生效中"
- 可选：分类筛选下拉（"全部"为默认）

**订阅卡片：**

```
┌─────────────────────────────────────┐
│ ██                                  │
│ ██  Netflix                    >    │
│      ¥ 48.00 / 月                   │
│      续费日：03-15  ·  影音娱乐      │
└─────────────────────────────────────┘
```

- 左侧：品牌色色块 + 首字母（或后续扩展为 logo）
- 右侧：箭头，点击进入编辑
- "已取消"列表中的卡片灰度化处理，并显示取消日期

**添加按钮：**

- 右下角 FAB（浮动操作按钮），"+" 图标
- 点击弹出底部抽屉

### 4.3 添加/编辑订阅（底部抽屉）

**表单字段及顺序：**

| 序号 | 字段 | 组件类型 | 说明 |
|-----|------|---------|------|
| 1 | 名称 | 文本输入 | 输入时触发品牌色匹配 |
| 2 | 金额 | 数字输入 | 带币种选择器（CNY/USD 切换） |
| 3 | 计费周期 | 选择器 | 月付/季付/年付/自定义 |
| 4 | 起始日期 | 日期选择器 | 默认今天 |
| 5 | 分类 | 选择器 + 新建 | 下拉选现有分类，末尾有"+ 新分类"选项 |
| 6 | 卡片颜色 | 颜色选择器 | 自动填充，可手动修改 |
| 7 | 备注 | 文本输入 | 可选，单行 |

**底部操作栏：**

- 新增模式：「取消」「保存」
- 编辑模式：「取消」「保存」「标记为已取消 / 重新激活」
- 编辑模式下，顶部或底部另有「删除」按钮（红色，需二次确认）

**交互细节：**

- 输入名称后，自动匹配品牌色 → 卡片颜色预览实时更新
- 选择计费周期 + 起始日期后，下方自动显示"下次扣款日：xxxx-xx-xx"
- 新建分类时，弹出小输入框，输入名称后自动分配颜色

### 4.4 设置面板

**入口：** 顶部栏右侧齿轮图标

**展示方式：** 下拉面板或底部抽屉（轻量，不跳转页面）

**内容：**

```
┌─────────────────────────────────┐
│  设置                      ✕    │
├─────────────────────────────────┤
│                                 │
│  主题                           │
│  [自动] [浅色] [深色]            │
│                                 │
│  数据管理                        │
│  [导出数据]  → 下载 JSON 文件    │
│  [导入数据]  → 选择 JSON 文件    │
│                                 │
│  关于                           │
│  SubTracker v1.0                │
│                                 │
└─────────────────────────────────┘
```

- 主题切换：三个按钮/Segment，当前选中项高亮
- 导出：点击后直接下载 `subtracker-export-2026-02-24.json`
- 导入：点击后打开文件选择器 → 选择文件 → 弹出确认"将替换当前所有数据，是否继续？" → 确认后导入并刷新页面

---

## 五、视觉规范

### 5.1 设计风格

参考截图中的暗色 UI 风格：

- **暗色模式**：纯黑/深灰底（#0A0A0B / #1A1A2E），卡片用深灰（#1E1E2E），彩色卡片用柔和低饱和度的品牌色
- **浅色模式**：白色底（#FFFFFF），卡片用浅灰（#F5F5F7），彩色卡片用稍高饱和度的品牌色
- 大圆角（16px-20px），宽松间距，呼吸感
- 金额数字加粗加大，信息层级清晰

### 5.2 字体

- 系统默认字体栈：`-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`
- 金额数字：加粗，字号为正文的 1.5-2 倍
- 辅助信息（日期、周期）：较小字号，降低对比度

### 5.3 色彩体系

**暗色模式：**

| 用途 | 色值 |
|------|------|
| 页面背景 | #0A0A0B |
| 卡片背景 | #1A1A2E |
| 主文字 | #FFFFFF |
| 次要文字 | #9CA3AF |
| 分割线 | #2D2D3A |
| 强调色 | #5B9EF4 |

**浅色模式：**

| 用途 | 色值 |
|------|------|
| 页面背景 | #F5F5F7 |
| 卡片背景 | #FFFFFF |
| 主文字 | #1A1A1A |
| 次要文字 | #6B7280 |
| 分割线 | #E5E7EB |
| 强调色 | #3B82F6 |

### 5.4 布局

- **移动端优先**：默认单列布局，max-width 480px
- **桌面端适配**：max-width 960px 居中，统计卡片可左右并排
- **安全区域**：底部留出 FAB 按钮的空间，避免内容被遮挡

---

## 六、验收标准

### 功能验收

- [ ] 可新增订阅，填写所有必填字段后保存成功
- [ ] 可编辑已有订阅的任意字段
- [ ] 可将订阅标记为"已取消"，归档保留
- [ ] 可将已取消的订阅重新激活
- [ ] 可彻底删除订阅（二次确认）
- [ ] 总览页正确显示月度/年度支出（CNY 和 USD 分开）
- [ ] 环形图正确展示分类占比
- [ ] 即将扣款列表按日期正序排列，天数显示正确
- [ ] 下次扣款日根据起始日期和周期自动计算
- [ ] 主题切换正常（自动/浅色/深色三档）
- [ ] 导出生成正确的 JSON 文件
- [ ] 导入 JSON 文件后数据正确覆盖
- [ ] 刷新页面后数据不丢失（localStorage 持久化）
- [ ] 品牌色自动匹配生效
- [ ] 新建分类功能正常

### 体验验收

- [ ] 移动端（375px 宽度）布局正常，无溢出
- [ ] 桌面端（1440px 宽度）布局合理
- [ ] 暗色/浅色两种模式下视觉表现一致性良好
- [ ] 表单填写流程顺畅，无卡顿
- [ ] 空状态（无订阅时）有合理的引导提示
